Bien s√ªr ! Voici le code complet du fichier `index.html` qui int√®gre toutes les corrections et am√©liorations que nous avons discut√©es :

1.  **Ic√¥nes personnalis√©es** pour chaque type de lieu (arr√™ts de bus, √©coles, etc.).
2.  Le **panneau de recherche se cache** apr√®s une recherche r√©ussie.
3.  Un bouton "**Nouvelle Recherche**" appara√Æt pour relancer une recherche.

Copiez-collez simplement l'int√©gralit√© de ce code dans votre fichier `index.html`.

```html
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSM Data Explorer</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Ajout de Font Awesome et Awesome Markers CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css" />
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        #map { 
            height: 100vh; 
            width: 100%; 
            z-index: 0;
        }
        
        .search-panel {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            max-width: 64rem;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .loading-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #6366f1;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .hidden { display: none; }

        /* Surcharge pour que les popups Leaflet aient une meilleure apparence avec Font Awesome */
        .leaflet-popup-content-wrapper {
            border-radius: 12px;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50">
    <!-- Header -->
    <header class="bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white shadow-2xl p-6 md:p-8 relative z-10">
        <div class="max-w-7xl mx-auto text-center md:text-left">
            <h1 class="text-3xl md:text-5xl font-black mb-2 drop-shadow-lg">
                üåç OSM Data Explorer
            </h1>
            <p class="text-lg md:text-xl opacity-95 max-w-3xl mx-auto md:mx-0 leading-relaxed">
                D√©crivez ce que vous voulez voir en langage naturel et regardez-le appara√Ætre sur une belle carte Voyager.
            </p>
            <p class="text-sm md:text-base mt-4 opacity-80 italic">
                R√©cup√®re des donn√©es en temps r√©el via l'API Overpass. Le zoom s'ajuste automatiquement!
            </p>
        </div>
    </header>

    <!-- Bouton pour une nouvelle recherche -->
    <button id="newSearchButton" class="hidden absolute top-28 left-4 z-[1000] bg-white/90 backdrop-blur-md shadow-lg rounded-lg p-3 text-gray-700 font-semibold hover:bg-gray-50 transition-transform hover:scale-105">
        <i class="fa-solid fa-magnifying-glass mr-2"></i> Nouvelle Recherche
    </button>

    <!-- Map Container -->
    <div id="map"></div>

    <!-- Search Panel -->
    <div class="search-panel">
        <div class="bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 p-6 md:p-8">
            <div class="space-y-6">
                <!-- Input Section -->
                <div>
                    <label class="block text-gray-800 text-xl font-bold mb-4 text-center md:text-left">
                        üîç Que voulez-vous explorer?
                    </label>
                    <input
                        type="text"
                        id="searchInput"
                        value="bus stops in Bordeaux"
                        class="w-full px-6 py-4 text-lg bg-gradient-to-r from-gray-50 to-blue-50 border-2 border-gray-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-indigo-500 focus:border-transparent shadow-xl transition-all duration-300 placeholder-gray-500 font-medium"
                        placeholder="Essayez: bus, school, restaurant, park... in your city"
                    />
                </div>

                <!-- Search Button -->
                <button
                    id="searchButton"
                    class="w-full py-4 px-8 bg-gradient-to-r from-emerald-500 via-teal-500 to-cyan-500 text-white font-extrabold text-lg rounded-2xl shadow-2xl hover:shadow-3xl transform hover:scale-105 active:scale-95 transition-all duration-300 flex items-center justify-center gap-3 uppercase tracking-wide"
                >
                    üöÄ Lancer la recherche
                </button>

                <!-- Error Display -->
                <div id="errorDisplay" class="hidden p-6 bg-gradient-to-r from-red-50 to-pink-50 border-2 border-red-200 rounded-2xl shadow-md">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="text-2xl">‚ö†Ô∏è</span>
                        <h3 class="font-bold text-red-800 text-lg">Probl√®me de requ√™te</h3>
                    </div>
                    <p id="errorMessage" class="text-red-700 leading-relaxed whitespace-pre-wrap"></p>
                </div>

                <!-- Supported Topics -->
                <div class="p-4 bg-blue-50/50 border border-blue-200 rounded-2xl text-sm md:text-base space-y-2">
                    <p class="font-semibold text-blue-800 flex items-center gap-2">
                        üìã Sujets support√©s (combinez-les!)
                    </p>
                    <p class="text-blue-700 pl-6">
                        bus, stop, school, university, college, pathway, footway, sidewalk, cycleway, bike, 
                        restaurant, cafe, bar, park, hospital, clinic, shop, store, atm, bank, hotel
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Counter -->
    <div id="resultsCounter" class="hidden absolute bottom-6 right-6 z-30">
        <div class="bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl p-4 md:p-6 border border-gray-200/50 space-y-3 min-w-[200px]">
            <div class="flex items-center justify-between gap-2 mb-3">
                <span class="text-2xl font-bold text-green-600">üéØ</span>
                <span id="resultCount" class="text-lg font-bold text-gray-800">0</span>
                <span class="text-sm text-gray-600">r√©sultats</span>
            </div>
            <button
                id="fitButton"
                class="w-full py-3 px-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 flex items-center justify-center gap-2 text-sm uppercase tracking-wide"
            >
                üìê Ajuster aux marqueurs
            </button>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="bg-white/90 backdrop-blur-xl rounded-3xl p-8 shadow-3xl text-center space-y-4 border-2 border-indigo-200">
            <div class="spinner"></div>
            <p class="text-xl font-semibold text-gray-700">R√©cup√©ration des donn√©es OpenStreetMap...</p>
            <p class="text-sm text-gray-500">Cela peut prendre quelques secondes pour les grandes zones.</p>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Ajout de la biblioth√®que Awesome Markers JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.min.js"></script>
    
    <script>
        // Configuration
        const topicMappings = {
            bus: '["highway"="bus_stop"]', stop: '["highway"="bus_stop"]',
            school: '["amenity"="school"]', university: '["amenity"="university"]', college: '["amenity"="college"]',
            pathway: '["highway"="pathway"]', footway: '["highway"="footway"]', sidewalk: '["highway"="footway"]',
            cycleway: '["highway"="cycleway"]', bike: '["highway"="cycleway"]',
            restaurant: '["amenity"="restaurant"]', cafe: '["amenity"="cafe"]', bar: '["amenity"="bar"]',
            park: '["leisure"="park"]',
            hospital: '["amenity"="hospital"]', clinic: '["amenity"="clinic"]',
            shop: '[shop]', store: '[shop]',
            atm: '["amenity"="atm"]', bank: '["amenity"="bank"]',
            hotel: '["tourism"="hotel"]',
        };

        // Initialize map
        const map = L.map('map').setView([48.8566, 2.3522], 13);
        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'
        }).addTo(map);

        // Global variables
        let markers = [];
        let features = [];

        // DOM elements
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const errorDisplay = document.getElementById('errorDisplay');
        const errorMessage = document.getElementById('errorMessage');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const resultsCounter = document.getElementById('resultsCounter');
        const resultCount = document.getElementById('resultCount');
        const fitButton = document.getElementById('fitButton');
        const searchPanel = document.querySelector('.search-panel');
        const newSearchButton = document.getElementById('newSearchButton');

        // Fonction pour choisir une ic√¥ne personnalis√©e en fonction des tags
        function getIconForFeature(tags) {
            if (tags.highway === 'bus_stop') return L.AwesomeMarkers.icon({ icon: 'bus', prefix: 'fa', markerColor: 'blue' });
            if (tags.amenity === 'school' || tags.amenity === 'college' || tags.amenity === 'university') return L.AwesomeMarkers.icon({ icon: 'school', prefix: 'fa', markerColor: 'green' });
            if (tags.amenity === 'restaurant') return L.AwesomeMarkers.icon({ icon: 'utensils', prefix: 'fa', markerColor: 'orange' });
            if (tags.amenity === 'cafe') return L.AwesomeMarkers.icon({ icon: 'coffee', prefix: 'fa', markerColor: 'cadetblue' });
            if (tags.amenity === 'bar') return L.AwesomeMarkers.icon({ icon: 'martini-glass', prefix: 'fa', markerColor: 'darkred' });
            if (tags.leisure === 'park') return L.AwesomeMarkers.icon({ icon: 'tree', prefix: 'fa', markerColor: 'darkgreen' });
            if (tags.amenity === 'hospital' || tags.amenity === 'clinic') return L.AwesomeMarkers.icon({ icon: 'kit-medical', prefix: 'fa', markerColor: 'red' });
            if (tags.shop) return L.AwesomeMarkers.icon({ icon: 'store', prefix: 'fa', markerColor: 'purple' });
            if (tags.amenity === 'bank') return L.AwesomeMarkers.icon({ icon: 'building-columns', prefix: 'fa', markerColor: 'darkblue' });
            if (tags.amenity === 'atm') return L.AwesomeMarkers.icon({ icon: 'money-bill-wave', prefix: 'fa', markerColor: 'darkgreen' });
            if (tags.tourism === 'hotel') return L.AwesomeMarkers.icon({ icon: 'bed', prefix: 'fa', markerColor: 'beige' });
            return L.AwesomeMarkers.icon({ icon: 'info-circle', prefix: 'fa', markerColor: 'gray' }); // Ic√¥ne par d√©faut
        }

        // Parse query function
        function parseQuery(query) {
            const lower = query.toLowerCase().trim();
            const inMatch = lower.match(/(.+?)\s+in\s+(.+)$/i);
            if (!inMatch) throw new Error('Format de requ√™te: "topics in city", ex: "bus stops in Bordeaux"');
            const [_, topicPart, cityPart] = inMatch;
            if (!topicPart.trim() || !cityPart.trim()) throw new Error('Le sujet et la ville sont requis.');
            
            const topicWords = topicPart.split(/[,\s]+and[,\s]+|[,\s]+|\band\b/).map(w => w.trim()).filter(Boolean);
            const tagFiltersSet = new Set(topicWords.map(w => topicMappings[w]).filter(Boolean));

            if (tagFiltersSet.size === 0) throw new Error(`Aucun sujet correspondant trouv√© dans "${topicPart}".`);
            return { tagFilters: Array.from(tagFiltersSet), city: cityPart.trim() };
        }

        // Calculate zoom for bbox
        function getZoomForBbox(south, west, north, east) {
            const latDiff = north - south;
            const lonDiff = east - west;
            const maxDiff = Math.max(latDiff, lonDiff / Math.cos((south + north) / 2 * Math.PI / 180));
            if (maxDiff <= 0.001) return 18; if (maxDiff <= 0.01) return 16;
            if (maxDiff <= 0.1) return 13; if (maxDiff <= 1) return 10;
            if (maxDiff <= 5) return 8; if (maxDiff <= 10) return 6;
            return 4;
        }

        // Clear markers
        function clearMarkers() {
            markers.forEach(marker => map.removeLayer(marker));
            markers = [];
        }

        // Handle search
        async function handleSearch() {
            errorDisplay.classList.add('hidden');
            clearMarkers();
            features = [];
            loadingOverlay.classList.remove('hidden');
            resultsCounter.classList.add('hidden');
            
            try {
                const { tagFilters, city } = parseQuery(searchInput.value);
                
                const nomUrl = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(city)}&limit=1&addressdetails=1`;
                const nomRes = await fetch(nomUrl);
                if (!nomRes.ok) throw new Error(`√âchec du g√©ocodage: ${nomRes.statusText}`);
                const nomData = await nomRes.json();
                if (nomData.length === 0) throw new Error(`Aucun lieu trouv√© pour la ville '${city}'.`);

                const place = nomData[0];
                const [south, north, west, east] = place.boundingbox.map(parseFloat);
                const bbox = `${south},${west},${north},${east}`;
                
                map.setView([parseFloat(place.lat), parseFloat(place.lon)], getZoomForBbox(south, west, north, east));
                
                const nodeQueries = tagFilters.map(filter => `node${filter}(${bbox})`).join('; ');
                const query = `[out:json][timeout:30];\n(\n  ${nodeQueries};\n);\nout geom;`;
                
                const opUrl = 'https://overpass-api.de/api/interpreter';
                const opRes = await fetch(opUrl, { method: 'POST', body: `data=${encodeURIComponent(query)}` });

                if (!opRes.ok) {
                    const errorBody = await opRes.text();
                    throw new Error(`Erreur API Overpass: ${opRes.statusText}. R√©ponse: ${errorBody.substring(0, 200)}`);
                }
                
                const opData = await opRes.json();
                features = (opData.elements || [])
                    .filter(el => el.type === 'node' && el.lat && el.lon)
                    .map(el => ({ position: [el.lat, el.lon], name: el.tags?.name || '√âl√©ment sans nom', tags: el.tags || {} }));
                
                features.forEach(feature => {
                    const icon = getIconForFeature(feature.tags);
                    const marker = L.marker(feature.position, { icon: icon }).addTo(map);
                    
                    let popupContent = `<div style="font-family: system-ui, -apple-system, sans-serif; line-height: 1.4;"><h3 style="font-size: 18px; font-weight: bold; margin-bottom: 12px; color: #1e293b; border-bottom: 2px solid #e2e8f0; padding-bottom: 6px;">${feature.name}</h3>`;
                    if (Object.keys(feature.tags).length > 0) {
                        popupContent += '<div style="font-size: 14px; max-height: 200px; overflow-y: auto;">';
                        Object.entries(feature.tags).forEach(([k, v]) => { popupContent += `<div style="margin-bottom: 8px; padding: 6px; background-color: #f8fafc; border-radius: 6px; border-left: 3px solid #3b82f6;"><span style="color: #374151; font-weight: 600;">${k}:</span> <span style="color: #4b5563;">${v}</span></div>`; });
                        popupContent += '</div>';
                    } else {
                        popupContent += `<p style="font-size: 14px; color: #6b7280; font-style: italic;">Aucun d√©tail disponible.</p>`;
                    }
                    popupContent += '</div>';
                    marker.bindPopup(popupContent, { maxWidth: 350, minWidth: 250 });
                    markers.push(marker);
                });
                
                if (features.length > 0) {
                    resultCount.textContent = features.length;
                    resultsCounter.classList.remove('hidden');
                }
                
                searchPanel.classList.add('hidden');
                newSearchButton.classList.remove('hidden');

            } catch (err) {
                errorMessage.textContent = err.message;
                errorDisplay.classList.remove('hidden');
            } finally {
                loadingOverlay.classList.add('hidden');
            }
        }

        // Event listeners
        searchButton.addEventListener('click', handleSearch);
        searchInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') handleSearch(); });
        fitButton.addEventListener('click', () => { if (markers.length > 0) map.fitBounds(L.featureGroup(markers).getBounds().pad(0.1)); });
        
        newSearchButton.addEventListener('click', () => {
            searchPanel.classList.remove('hidden');
            newSearchButton.classList.add('hidden');
            clearMarkers();
            resultsCounter.classList.add('hidden');
            errorDisplay.classList.add('hidden');
        });
        
    </script>
</body>
</html>
```
